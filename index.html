<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>P. A. Barczewska</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --radius: 35px; --shadow: 0 10px 40px rgba(0,0,0,0.2); }
        * { box-sizing: border-box; }
        body { 
            margin: 0; font-family: "Inter", sans-serif; color: #151515; 
            background-image: url("file_000000006408722fa2ddd16807e0f8b7.png"); 
            background-size: cover; background-position: center; background-attachment: fixed; min-height: 100vh; 
        }
        body::before { content: ""; position: fixed; inset: 0; background: rgba(0,0,0,0.35); z-index: -1; }
        header { max-width: 980px; margin: 24px auto 0; padding: 0 18px; display: flex; align-items: center; gap: 14px; color: #fff; }
        .logo { width: 64px; height: 64px; border-radius: 50%; background: #fff; object-fit: cover; box-shadow: 0 10px 30px rgba(0,0,0,0.3); flex: 0 0 auto; cursor: pointer; }
        header h1 { font-family: "Playfair Display", serif; font-size: 1.5rem; margin: 0; }
        .hero { max-width: 980px; margin: 20px auto; padding: 80px 20px; border-radius: var(--radius); background: rgba(255,255,255,0.15); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.2); text-align: center; color: #fff; box-shadow: var(--shadow); }
        .hero h2 { font-family: "Playfair Display", serif; font-size: 2.5rem; margin: 0; }
        main { max-width: 980px; margin: 0 auto; padding: 0 18px; }
        section { background: rgba(255,255,255,0.78); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-radius: var(--radius); box-shadow: var(--shadow); padding: 35px 30px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.3); }
        section h2 { font-family: "Playfair Display", serif; font-size: 1.8rem; margin: 0 0 15px; }
        section p { font-size: 0.97rem; line-height: 1.7; margin: 0 0 12px; }
        .work-block { margin-top: 22px; padding-top: 18px; border-top: 1px solid rgba(0,0,0,0.1); }
        .work-block h3 { font-family: "Playfair Display", serif; font-size: 1.2rem; margin: 0 0 8px; }
        .post-preview { margin-top: 22px; padding-top: 20px; border-top: 1px solid rgba(0,0,0,0.1); }
        .post-preview h3 { font-family: "Playfair Display", serif; font-size: 1.25rem; margin: 0 0 8px; }
        .read-more { display: inline-block; margin-top: 10px; text-decoration: none; color: #111; font-weight: 600; border-bottom: 1px solid #111; padding-bottom: 2px; }
        footer { color: rgba(255,255,255,0.85); font-size: 0.9rem; text-align: center; padding-bottom: 60px; }
        .social-links { display: flex; justify-content: center; gap: 12px; margin: 35px 0 15px; flex-wrap: wrap; }
        .social-link { display: flex; align-items: center; gap: 8px; color: #fff; text-decoration: none; font-size: 0.85rem; background: rgba(255,255,255,0.15); padding: 12px 18px; border-radius: 30px; backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.2); }
    </style>
</head>
<body>

<header>
    <img id="secretLogo" class="logo" src="file_000000001f04720c8a514e8f7c6decad.png" alt="Logo">
    <div><h1>P. A. Barczewska</h1><p>Pisarka emocji. Kryminologia z ciekawości.</p></div>
</header>

<div class="hero">
    <h2>P. A. Barczewska</h2>
    <p>Pisarka emocji. Kryminologia z ciekawości.</p>
</div>

<main>
    <section>
        <h2>O mnie</h2>
        <p>Piszę o emocjach, relacjach i o tym, co dzieje się z człowiekiem w momentach granicznych. Interesuje mnie to, co niewypowiedziane — napięcia, decyzje podejmowane w ciszy, drobne pęknięcia, które zmieniają bieg historii.</p>
        <p>Kryminologia jest dla mnie narzędziem myślenia. Ukończone studia pozwoliły mi lepiej rozumieć mechanizmy przemocy, wiktymologii oraz zachowań ludzkich.</p>
    </section>

    <section>
        <h2>Twórczość</h2>
        <div class="work-block">
            <h3>Kryminał / psychologia</h3>
            <p>Najbliższy jest mi kryminał oparty na emocjach i perspektywie człowieka, nie na samej zbrodni.</p>
        </div>
        <div class="work-block">
            <h3>Romans</h3>
            <p>Romans traktuję jako przestrzeń do opowiadania o bliskości, zależnościach i potrzebie bycia widzianym.</p>
        </div>
    </section>

    <section id="teksty-sekcja">
        <h2>Teksty</h2>
        <div id="dynamic-posts">
            <p style="opacity:0.5;">Szukam nowych tekstów...</p>
        </div>
    </section>
</main>

<footer>
    <div class="social-links">
        <a href="mailto:p.a.barczewska@gmail.com" class="social-link"><i class="fas fa-envelope"></i> Email</a>
        <a href="https://www.instagram.com/p.a.barczewska" class="social-link"><i class="fab fa-instagram"></i> Instagram</a>
    </div>
    <p>© <span id="year"></span> P. A. Barczewska</p>
</footer>

<script>
    document.getElementById("year").textContent = new Date().getFullYear();

    const SPACE = "4njr98q3c6g4";
    const TOKEN = "GjcqWIsIud_ukRdgbQPJrzwsRbwkBxO4g5K6-SMwE2Y";

    function parseRichText(node) {
        if (!node) return "";
        if (node.nodeType === "text") return node.value;
        if (node.content) return node.content.map(parseRichText).join("");
        return "";
    }

    async function loadContentful() {
        const container = document.getElementById("dynamic-posts");
        const url = `https://cdn.contentful.com/spaces/${SPACE}/environments/master/entries?access_token=${TOKEN}&content_type=article&locale=*&order=-sys.createdAt`;

        try {
            const r = await fetch(url);
            const data = await r.json();
            if (data.items && data.items.length > 0) {
                container.innerHTML = ""; 
                data.items.forEach(item => {
                    const f = item.fields;
                    const lang = f.title['pl'] ? 'pl' : Object.keys(f.title)[0];
                    const title = f.title[lang] || "Bez tytułu";
                    const body = parseRichText(f.content ? f.content[lang] : null);
                    
                    const art = document.createElement("article");
                    art.className = "post-preview";
                    art.innerHTML = `
                        <h3>${title}</h3>
                        <p>${body.substring(0, 150)}...</p>
                        <a class="read-more" href="view.html?id=${item.sys.id}">Czytaj dalej</a>
                    `;
                    container.appendChild(art);
                });
            } else {
                container.innerHTML = "<p>Wkrótce pojawią się nowe teksty.</p>";
            }
        } catch(e) {
            container.innerHTML = "<p>Podłączanie do biblioteki...</p>";
        }
    }

    loadContentful();

    let clicks = 0;
    document.getElementById("secretLogo").onclick = () => {
        clicks++;
        if(clicks === 4) window.location.href = `https://app.contentful.com/spaces/${SPACE}/entries`;
        setTimeout(() => clicks = 0, 2000);
    };
</script>
</body>
</html>
